#!/usr/bin/env node
// Run as bin
'use strict';
var path = require('path');
var fs   = require('fs');
var config;
var argv = require('yargs')
    .option('config', {
        alias    : 'c',
        demand   : true,
        default  : 'foxman.config.js',
        describe : "Config file. Options read readme.md",
        boolean  : 0
    })
    .usage('Usage: foxman [options]')
    .example('foxman -c ./config.json', 'set config file')
    .help('h')
    .alias('h', 'help')
    .epilog('copyright junyu')
    .argv;


var configPath = path.join(process.cwd(), argv.config);

try{
    config = require(configPath);
}catch(err){
    console.log('Error:\n the config file (default is "foxman.config.js") is not found!');
    process.exit(1);
}

require('../app.js')( config );