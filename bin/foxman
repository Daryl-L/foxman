#!/usr/bin/env node
'use strict';
var anymatch = require('anymatch');
var path = require('path');
var fs = require('fs');
var config;
var argv = require('yargs')
    .option('config', {
        alias: 'c',
        demand: true,
        default: 'foxman.config.js',
        describe: 'Config file. Options read readme.md',
        boolean: 0
    })
    .option('update', {
        alias: 'u',
        demand: false,
        default: false,
        describe: 'is update from nei'
    })
    .usage('Usage: foxman [options]')
    .example('foxman -c ./config.json', 'set config file')
    .help('h')
    .alias('h', 'help')
    .epilog('copyright junyu')
    .argv;


var configPath = path.join(process.cwd(), argv.config);

try {
    config = require(configPath);
} catch (err) {
    console.log(`Error:\n ${err}`);
    process.exit(1);
}

Object.assign(config, {
    update: argv.update || false
});

require('../app.js')(config);
